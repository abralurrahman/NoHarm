<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Choice Sets</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body data-page="choice_experiment">

    <!-- Language switcher in the corner -->
    <div class="language-switcher">
        <select id="language-switcher">
            <option value="ar">Arabic</option>
            <option value="bn">Bangla</option>
            <option value="zh">Chinese</option>
            <option value="en" >English</option>
            <option value="fr">French</option>
            <option value="de">German</option>
            <option value="hi">Hindi</option>
            <option value="ja">Japanese</option>
            <option value="ru">Russian</option>
            <option value="es">Spanish</option>
        </select>
    </div>

    <div class="choice-container">
        <h1 id="survey-title">Visual Choice Sets</h1>
        <p id="patient-question">
            Not every patient can be treated in a medical emergency. A decision has to be made about which patient to treat and which patient not to treat. Which of the patients shown below should be treated?
        </p>

        <div class="decision-pair">
            <h2>Decision {{ page }}</h2>
            <div class="patients">
                <!-- Patient 1 -->
                <div class="patient">
                    <img src="{{ url_for('static', filename='images/' + images[0].filename) }}" 
                         alt="Patient 1" 
                         data-hover-text="{{ images[0].description }}" 
                         onclick="submitChoice('{{ images[0].filename }}')">
                    <div class="hover-text">{{ images[0].description }}</div>
                </div>

                <!-- Patient 2 -->
                <div class="patient">
                    <img src="{{ url_for('static', filename='images/' + images[1].filename) }}" 
                         alt="Patient 2" 
                         data-hover-text="{{ images[1].description }}" 
                         onclick="submitChoice('{{ images[1].filename }}')">
                    <div class="hover-text">{{ images[1].description }}</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden form for submitting selected choice -->
    <form id="choice-form" method="POST" action="/choice-experiment" style="display:none;">
        <input type="hidden" name="selected_image" id="selected-image">
    </form>

    <script>
        // JavaScript to handle image selection and form submission
        function submitChoice(selectedImage) {
            document.getElementById('selected-image').value = selectedImage;
            document.getElementById('choice-form').submit();
        }
    </script>
</body>
</html>
